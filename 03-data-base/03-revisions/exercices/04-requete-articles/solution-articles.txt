**
**	EXERCICE 4 : REQUETES ARTICLES
** 			Table "articles" dans base de donnees "test_cours"
**




** 3.1. Selection de tous les "Polos"

SELECT * 
FROM `articles` 
WHERE `Designation` LIKE '%Polo%'



** 3.2. Somme de tous les articles en stock 

SELECT sum( `Q_stock` ) AS Total 
FROM `articles` 


** 3.3. Somme de tous les "Polos" en stock 

SELECT sum( `Q_stock` ) AS Total_Polo
FROM `articles` 
WHERE `Designation` LIKE '%Polo%'



** 3.4. Recherche du Prix de Vente le plus cher

SELECT max( `P_vente` ) AS Maximum
FROM `articles` 



** 3.5. Recherche du Prix de Vente le moins cher

SELECT min( `P_vente` ) AS Minimum
FROM `articles` 



** 3.6. Recherche des articles dont le P_Vente est > 20

SELECT * 
FROM `articles` 
WHERE `P_vente` > 20.00



** 3.7. Informations sur l'article le plus cher

SELECT *
FROM articles
WHERE P_vente = (SELECT max( P_vente ) FROM articles) 


** 3.8. Calcul de la marge par article

SELECT Designation, (P_vente - P_achat) AS Marge, P_vente, P_achat 
FROM `articles` 


** 3.8.1. Calcul de la marge par article trie en croissant

SELECT Designation, (P_vente - P_achat) AS Marge, P_vente, P_achat 
FROM `articles` 
ORDER BY Designation


** 3.8.2. Calcul de la marge par article trie en decroissant

SELECT Designation, (P_vente - P_achat) AS Marge, P_vente, P_achat 
FROM `articles` 
ORDER BY Designation DESC 


** 3.9. Articles a commander 

SELECT *
FROM `articles` 
WHERE Q_Stock <= Q_Min_Stock



** 3.10. Prix de vente soldes a 10,20 et 30%
 
SELECT Designation, P_vente AS Prix_0, ROUND(P_vente*0.9,2) AS Prix_10, ROUND(P_vente*0.8,2) AS Prix_20, ROUND(P_vente*0.7,2) AS Prix_30
FROM `articles` 
ORDER BY Designation DESC 


** 3.11. Calcul du benefice (a 2 decimales) sur chaque article en stock 

SELECT Designation, ROUND(Q_Stock*(P_vente - P_achat),2) AS Benefice 
FROM `articles` 
ORDER BY Designation ASC



** 3.12. Calcul du benefice global du stock 

SELECT SUM(ROUND(Q_Stock*(P_vente - P_achat),2)) AS Benefice 
FROM `articles` 



** 3.13. Regroupement par type (1er libelle de designation) avec nombre de types et totalisation du stock par type

SELECT SUBSTRING_INDEX(Designation," ", 1) AS Groupe, COUNT(*) AS Type, SUM( Q_Stock ) AS Total_Stock
FROM articles
GROUP BY Groupe




** 3.14. Regroupement par couleur (2eme libelle de designation : 5 caracteres) avec nombre d'articles par couleur et totalisation du stock par couleur

SELECT LEFT(SUBSTRING_INDEX(SUBSTRING_INDEX(Designation," ", 2)," ",-1),5) AS Couleur, COUNT(*) AS Type, SUM( Q_Stock ) AS Total_Stock
FROM articles
GROUP BY Couleur